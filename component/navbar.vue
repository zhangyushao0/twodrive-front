<template>
    <aside class="sidebar">
      <ul class="nav">
        <li style="background-color: green; cursor: pointer;" @click="openFileInput">+新增</li>

        <hr class="file-divider"> <!-- 添加横杠 -->
        <li><router-link to="/main">主页</router-link></li>
        <hr class="file-divider"> <!-- 添加横杠 -->
        <li><router-link to="/main">我的文件</router-link></li>
        <hr class="file-divider"> <!-- 添加横杠 -->
        <li><router-link to="/page3">已共享</router-link></li>
        <hr class="file-divider"> <!-- 添加横杠 -->
        <li><router-link to="/page3">照片</router-link></li>
        <hr class="file-divider"> <!-- 添加横杠 -->
        <li><router-link to="/page3">回收站</router-link></li>
        <hr class="file-divider"> <!-- 添加横杠 -->
        <li><router-link to="/page3">最近</router-link></li>
        <!-- 添加更多页面链接 -->
      </ul>
    <input ref="fileInput" type="file" @change="handleFileUpload" style="display: none;">
    <button @click="uploadFile" :disabled="!selectedFile">上传文件</button>
  </aside>
  </template>
  
  <script>
import axios from 'axios';
  export default {
    name: 'Navbar',
    data() {
    return {
      selectedFile: null
    };
  },
  methods: {
    openFileInput() {
      this.$refs.fileInput.click();
    },
    handleFileUpload(event) {
      this.selectedFile = event.target.files[0];
    
      if (!this.selectedFile) {
        alert('请先选择要上传的文件');
        return;
      }

      const formData = new FormData();
      formData.append('file', this.selectedFile);

      axios.post('/api/upload', formData, {
        headers: {
          'Content-Type': 'multipart/form-data'
        }
      }).then(response => {
        console.log('文件上传成功', response.data);
        // 在上传成功后的逻辑处理
      }).catch(error => {
        console.error('文件上传失败', error);
        // 在上传失败后的逻辑处理
      });
    }
  }
  }
  </script>
  
  <style scoped>
  .sidebar {
    position: fixed;
    left: 0;
    top: 0;
    width: 200px; /* 设置导航栏宽度 */
    padding: 20px;
    margin:2ch;
    border-radius: 2cap;
    background-color: aliceblue;
    box-sizing: border-box; /* 包括 padding 在内的盒子模型 */
  }
  
  .nav {
    list-style: none;
    padding: 0;
  }
  
  .nav li {
    margin-bottom: 10px;
    margin: 15%;
    background-color: rgb(168, 230, 154);
    text-align: center;
    border-radius:2cqh;
    padding:10%;
  }
  
  .nav a {
    text-decoration: none;
    color: #333;
  }

  .add{
    margin: 15%;
  }
  </style>